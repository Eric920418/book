module.exports=[77923,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.HooksClientContext},15932,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},47767,(a,b,c)=>{"use strict";b.exports=a.r(18622)},46385,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].ReactJsxRuntime},70756,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].React},23793,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.AppRouterContext},44835,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].ReactServerDOMTurbopackClient},23820,a=>{"use strict";let b=[{key:"noticing",name:"注意",description:"察覺呼吸、緊繃或舒適等身體變化",questionIds:[1,2,3,4]},{key:"notDistracting",name:"不分心",description:"能面對不適，不逃避或壓抑",questionIds:[5,6,7,8,9,10]},{key:"notWorrying",name:"不擔心",description:"面對不適時不陷入焦慮或恐懼",questionIds:[11,12,13,14,15]},{key:"attentionRegulation",name:"注意調節",description:"能主動把注意力帶回身體，如呼吸錨定",questionIds:[16,17,18,19,20,21,22]},{key:"emotionalAwareness",name:"情緒覺察",description:"感受情緒如何在身體中顯現",questionIds:[23,24,25,26,27]},{key:"selfRegulation",name:"自我調節",description:"透過身體感受調節情緒與喚起",questionIds:[28,29,30,31,32]},{key:"bodyListening",name:"身體聆聽",description:"細膩傾聽身體訊息，從中獲得方向感",questionIds:[33,34,35]},{key:"trusting",name:"身體信任",description:"感到身體是安全、可靠的地方",questionIds:[36,37]}],c=[5,6,7,8,9,10,11,12,15];function d(a){let d={};return b.forEach(b=>{let e=b.questionIds.map(b=>{let d=a[b]||0;return c.includes(b)?5-d:d}),f=e.reduce((a,b)=>a+b,0)/e.length;d[b.key]=Number(f.toFixed(2))}),d}a.s(["calculateDimensionScores",()=>d,"dimensions",0,b,"questions",0,[{id:1,text:"當我緊張時，我會注意到身體的緊繃感。",dimension:"noticing"},{id:2,text:"我會注意到自己的呼吸變化。",dimension:"noticing"},{id:3,text:"我會注意到自己的心跳。",dimension:"noticing"},{id:4,text:"我會注意到身體舒適或不舒適的感覺。",dimension:"noticing"},{id:5,text:"當我感到身體疼痛或不舒服時，我會試圖分散注意力，不去想它。",dimension:"notDistracting"},{id:6,text:"當我感到身體不適時，我會試圖忽略它。",dimension:"notDistracting"},{id:7,text:"當我感到疼痛時，我會試圖不去注意它。",dimension:"notDistracting"},{id:8,text:"如果我感到不舒服，我會盡量不去感覺它。",dimension:"notDistracting"},{id:9,text:"當我覺得身體某處有壓力時，我會試圖無視它。",dimension:"notDistracting"},{id:10,text:"當我感到身體不舒服時，我會做其他事情來分散注意力。",dimension:"notDistracting"},{id:11,text:"當我感到身體有些緊繃或不適時，我會開始擔心是不是哪裡出了問題。",dimension:"notWorrying"},{id:12,text:"我會因為身體的某個感覺而開始擔心。",dimension:"notWorrying"},{id:13,text:"當我察覺到身體的感覺時，我會變得焦慮。",dimension:"notWorrying"},{id:14,text:"當我覺得身體某處有緊繃感時，我會開始煩躁。",dimension:"notWorrying"},{id:15,text:"我會因為身體的不適而感到害怕。",dimension:"notWorrying"},{id:16,text:"我能把注意力從雜念拉回到身體的感覺上。",dimension:"attentionRegulation"},{id:17,text:"我能維持對身體感覺的注意力。",dimension:"attentionRegulation"},{id:18,text:"當我分心時，我能把注意力重新帶回到身體。",dimension:"attentionRegulation"},{id:19,text:"我能把注意力集中在呼吸上。",dimension:"attentionRegulation"},{id:20,text:"我能專注於身體的內在感覺。",dimension:"attentionRegulation"},{id:21,text:"當需要時，我能將注意力轉移到身體的某個特定部位。",dimension:"attentionRegulation"},{id:22,text:"我能持續感知身體的整體狀態。",dimension:"attentionRegulation"},{id:23,text:"我會注意到自己的情緒如何影響身體的感覺。",dimension:"emotionalAwareness"},{id:24,text:"我會注意到身體的感覺改變了我的情緒狀態。",dimension:"emotionalAwareness"},{id:25,text:"當我生氣時，我能感覺到身體的變化。",dimension:"emotionalAwareness"},{id:26,text:"我能察覺到情緒在身體中的位置。",dimension:"emotionalAwareness"},{id:27,text:"我會注意到身體的感覺影響了我的思緒。",dimension:"emotionalAwareness"},{id:28,text:"當我心煩意亂時，我能夠透過關注身體來讓自己平靜下來。",dimension:"selfRegulation"},{id:29,text:"我能利用呼吸來減輕緊張感。",dimension:"selfRegulation"},{id:30,text:"當我焦慮時，我能藉由感受身體來穩定自己。",dimension:"selfRegulation"},{id:31,text:"當我情緒激動時，我能透過覺察身體來調節情緒。",dimension:"selfRegulation"},{id:32,text:"我能夠透過關注身體來減輕不愉快的感受。",dimension:"selfRegulation"},{id:33,text:"我會傾聽身體給我的訊息，了解該怎麼做。",dimension:"bodyListening"},{id:34,text:"我會信任身體的感覺，作為重要的決策依據。",dimension:"bodyListening"},{id:35,text:"我能從身體的感覺得知我需要什麼。",dimension:"bodyListening"},{id:36,text:"我的身體是一個安全的地方。",dimension:"trusting"},{id:37,text:"我信任自己的身體感覺。",dimension:"trusting"}]])},70966,a=>{"use strict";var b=a.i(46385),c=a.i(70756),d=a.i(38384),e=a.i(995),f=a.i(23820);let g=["從不","很少","偶爾","有時","經常","總是"],h="maia2_quiz_progress";function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)({}),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),w=f.questions[i],x=(i+1)/f.questions.length*100,y=k[w.id];(0,c.useEffect)(()=>{try{let a=localStorage.getItem(h);if(a){let b=JSON.parse(a);b.answers&&Object.keys(b.answers).length>0&&(v(b),t(!0))}}catch(a){console.error("讀取緩存失敗:",a)}},[]),(0,c.useEffect)(()=>{if(Object.keys(k).length>0&&!m)try{let a={currentQuestionIndex:i,answers:k,lastSaved:new Date().toISOString()};localStorage.setItem(h,JSON.stringify(a))}catch(a){console.error("保存進度失敗:",a)}},[k,i,m]);let z=async()=>{let b=(0,f.calculateDimensionScores)(k),c={answers:k,dimensionScores:b,completedAt:new Date().toISOString()};localStorage.setItem("maia2_result",JSON.stringify(c));try{localStorage.removeItem(h)}catch(a){console.error("清除緩存失敗:",a)}if(o.trim()){r(!0);try{await fetch("/api/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim(),resultData:b,completedAt:c.completedAt})})}catch(a){console.error("提交失敗:",a)}finally{r(!1)}}a.push("/quiz/result")};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[s&&u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-2xl p-6 md:p-8 max-w-md w-full shadow-2xl animate-fade-in",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-2",children:"發現未完成的測驗"}),(0,b.jsx)("p",{className:"text-foreground/70 text-sm md:text-base mb-1",children:"您有一個尚未完成的測驗進度"}),(0,b.jsxs)("p",{className:"text-foreground/60 text-xs md:text-sm",children:["已完成 ",Object.keys(u.answers).length," / ",f.questions.length," 題"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("button",{onClick:()=>{u&&(l(u.answers),j(u.currentQuestionIndex),t(!1))},className:"w-full px-6 py-3 bg-foreground text-background rounded-lg hover:opacity-90 transition-opacity font-semibold",children:"繼續上次的測驗"}),(0,b.jsx)("button",{onClick:()=>{try{localStorage.removeItem(h),t(!1),v(null),l({}),j(0)}catch(a){console.error("清除緩存失敗:",a)}},className:"w-full px-6 py-3 border-2 border-foreground/20 rounded-lg hover:bg-foreground/5 transition-colors font-semibold",children:"重新開始測驗"})]}),(0,b.jsx)("p",{className:"mt-4 text-xs text-center text-foreground/60",children:"提示：系統會自動保存您的答題進度"})]})}),(0,b.jsx)("nav",{className:"bg-card border-b border-border sticky top-0 z-50",children:(0,b.jsx)("div",{className:"container mx-auto px-3 md:px-4 py-3 md:py-4",children:(0,b.jsxs)("div",{className:"flex justify-between items-center gap-2 md:gap-4",children:[(0,b.jsx)(e.default,{href:"/",className:"text-sm md:text-xl font-bold text-primary hover:opacity-80 truncate min-w-0 flex-shrink",children:"《你不是破碎，而是入口》"}),(0,b.jsx)(e.default,{href:"/quiz/manual",className:"text-xs md:text-base text-foreground/70 hover:text-primary transition-colors whitespace-nowrap flex-shrink-0",children:"量表說明"})]})})}),(0,b.jsx)("main",{className:"container mx-auto px-3 md:px-4 py-8 md:py-12 max-w-4xl",children:m?(0,b.jsx)("div",{className:"max-w-2xl mx-auto animate-fade-in",children:(0,b.jsxs)("div",{className:"bg-card rounded-2xl p-5 md:p-12 shadow-lg text-center",children:[(0,b.jsxs)("div",{className:"mb-5 md:mb-6",children:[(0,b.jsx)("div",{className:"w-16 md:w-20 h-16 md:h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:(0,b.jsx)("svg",{className:"w-8 md:w-10 h-8 md:h-10 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:"測驗完成！"}),(0,b.jsx)("p",{className:"text-foreground/70 text-base md:text-lg",children:"感謝你完成 MAIA-2 內感受量表"})]}),(0,b.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,b.jsx)("h3",{className:"text-lg md:text-xl font-semibold mb-3 md:mb-4 px-2",children:"留下您的電子郵件，我們將把完整結果寄給您"}),(0,b.jsxs)("p",{className:"text-foreground/60 text-xs md:text-sm mb-5 md:mb-6 px-2",children:["為了讓您能隨時查看測驗結果，請填寫您的電子郵件。",(0,b.jsx)("br",{}),"我們會將完整的 MAIA-2 覺察輪廓寄送給您。"]}),(0,b.jsx)("input",{type:"email",value:o,onChange:a=>p(a.target.value),placeholder:"請輸入您的電子郵件",required:!0,className:"w-full text-black px-3 md:px-4 py-2.5 md:py-3 rounded-lg border-2 border-border focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all mb-5 md:mb-6 text-sm md:text-base"}),(0,b.jsx)("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 justify-center",children:(0,b.jsx)("button",{onClick:z,disabled:q||!o.trim(),className:"px-6 md:px-8 py-3 md:py-4 bg-foreground text-background rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-base md:text-lg",children:q?"發送中...":"查看測驗結果"})}),(0,b.jsx)("p",{className:"mt-5 md:mt-6 text-[10px] md:text-xs text-foreground/60 px-2",children:"我們尊重您的隱私，電子郵件僅用於發送測驗結果"})]})]})}):(0,b.jsxs)("div",{className:"animate-fade-in",children:[(0,b.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-4xl font-bold mb-2",children:"MAIA-2 內感受量表"}),(0,b.jsx)("p",{className:"text-foreground/70 text-sm md:text-lg",children:"一份描繪「我與身體關係」的 8 個面向量表"}),(0,b.jsx)("p",{className:"text-xs md:text-sm text-foreground/60 mt-2",children:"共 37 題，請依照你「平常的生活狀態」作答"})]}),(0,b.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs md:text-sm text-foreground/70 mb-2",children:[(0,b.jsxs)("span",{children:["問題 ",i+1," / ",f.questions.length]}),(0,b.jsxs)("span",{children:[Math.round(x),"% 完成"]})]}),(0,b.jsx)("div",{className:"w-full bg-secondary rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),(0,b.jsxs)("div",{className:"bg-card rounded-2xl p-4 md:p-10 shadow-lg mb-6 md:mb-8",children:[(0,b.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,b.jsxs)("div",{className:"text-xs md:text-sm text-foreground/60 mb-2",children:["題目 ",w.id," / ",f.questions.length]}),(0,b.jsx)("h2",{className:"text-lg md:text-2xl font-semibold leading-relaxed",children:w.text})]}),(0,b.jsxs)("div",{className:"space-y-2 md:space-y-4",children:[(0,b.jsx)("p",{className:"text-center text-xs md:text-base text-foreground/70 mb-3 md:mb-6",children:"請選擇最符合你平常狀態的選項"}),(0,b.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-1.5 md:gap-3",children:[0,1,2,3,4,5].map(a=>(0,b.jsxs)("button",{onClick:()=>{l({...k,[w.id]:a})},className:`p-2 md:p-4 rounded-lg border-2 transition-all text-center ${y===a?"border-primary bg-primary/10 scale-105":"border-border hover:border-primary/50 hover:scale-102"}`,children:[(0,b.jsx)("div",{className:"text-lg md:text-2xl font-bold mb-0.5 md:mb-1",children:a}),(0,b.jsx)("div",{className:"text-[9px] md:text-xs text-foreground/70 leading-tight",children:g[a]})]},a))}),(0,b.jsxs)("div",{className:"flex justify-between text-[10px] md:text-sm text-foreground/60 mt-2 md:mt-4 px-0.5 md:px-2",children:[(0,b.jsx)("span",{children:"← 從不"}),(0,b.jsx)("span",{children:"總是 →"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between gap-3 md:gap-4",children:[(0,b.jsxs)("button",{onClick:()=>{i>0&&j(i-1)},disabled:0===i,className:"px-4 md:px-6 py-2.5 md:py-3 rounded-lg border-2 border-foreground/20 hover:bg-foreground/5 transition-colors disabled:opacity-30 disabled:cursor-not-allowed font-semibold text-sm md:text-base",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"← 上一題"}),(0,b.jsx)("span",{className:"sm:hidden",children:"←"})]}),(0,b.jsx)("button",{onClick:()=>{void 0!==y&&(i<f.questions.length-1?j(i+1):n(!0))},disabled:void 0===y,className:"px-5 md:px-8 py-2.5 md:py-3 bg-foreground text-background rounded-lg hover:opacity-90 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed font-semibold text-sm md:text-base",children:i===f.questions.length-1?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"完成測驗 →"}),(0,b.jsx)("span",{className:"sm:hidden",children:"完成 →"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"下一題 →"}),(0,b.jsx)("span",{className:"sm:hidden",children:"→"})]})})]}),(0,b.jsx)("div",{className:"mt-6 md:mt-8 text-center text-xs md:text-sm text-foreground/60 px-2",children:(0,b.jsxs)("p",{children:["建議第一次作為基線，4-8 週後再重測。",(0,b.jsx)("br",{}),"本階段不留存資料，結果只在你的裝置顯示。"]})})]})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ae34781f._.js.map