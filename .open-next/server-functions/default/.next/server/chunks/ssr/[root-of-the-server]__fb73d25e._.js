module.exports=[77923,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.HooksClientContext},15932,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},47767,(a,b,c)=>{"use strict";b.exports=a.r(18622)},46385,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].ReactJsxRuntime},70756,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].React},23793,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored.contexts.AppRouterContext},44835,(a,b,c)=>{"use strict";b.exports=a.r(47767).vendored["react-ssr"].ReactServerDOMTurbopackClient},88367,a=>{"use strict";var b=a.i(46385),c=a.i(70756),d=a.i(38384),e=a.i(995);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let b,c,d=localStorage.getItem("adminToken");if(!d)return void m(!1);let e=d.split(".");if(3!==e.length)throw Error("Token 格式錯誤");let f=(b=e[1].replace(/-/g,"+").replace(/_/g,"/"),c=(4-b.length%4)%4,atob(b+="=".repeat(c))),g=JSON.parse(f);if(!g.email||!g.name)throw Error("Token 內容不完整");if(g.exp&&1e3*g.exp<Date.now())throw Error("Token 已過期");a.push("/admin/dashboard")}catch{localStorage.removeItem("adminToken"),m(!1)}})()},[a]);let p=async b=>{b.preventDefault(),k(!0),o("");try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:h})}),c=await b.json();b.ok?(localStorage.setItem("adminToken",c.token),a.push("/admin/dashboard")):o(c.error||"登入失敗")}catch{o("發生錯誤，請稍後再試")}finally{k(!1)}};return l?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),(0,b.jsx)("p",{className:"text-foreground/70",children:"檢查登入狀態..."})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,b.jsx)("div",{className:"w-full max-w-md",children:(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-lg p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-primary mb-2",children:"管理員登入"}),(0,b.jsx)("p",{className:"text-foreground/70",children:"請輸入您的管理員帳號密碼"})]}),n&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg mb-4 text-sm",children:n}),(0,b.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"電子郵件"}),(0,b.jsx)("input",{id:"email",type:"email",value:f,onChange:a=>g(a.target.value),required:!0,className:"w-full text-black px-4 py-3 rounded-lg border border-border focus:border-primary  focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",placeholder:"admin@example.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"密碼"}),(0,b.jsx)("input",{id:"password",type:"password",value:h,onChange:a=>i(a.target.value),required:!0,className:"w-full text-black px-4 py-3 rounded-lg border border-border focus:border-primary  focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",placeholder:"••••••••"})]}),(0,b.jsx)("button",{type:"submit",disabled:j,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg  hover:bg-primary/90 transition-colors disabled:opacity-50  disabled:cursor-not-allowed font-semibold",children:j?"登入中...":"登入"})]}),(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsx)(e.default,{href:"/",className:"text-sm text-foreground/70 hover:text-primary transition-colors",children:"← 返回首頁"})})]})})})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fb73d25e._.js.map